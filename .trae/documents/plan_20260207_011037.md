# Comprehensive User Journey & Tiered Pricing Strategy

## Overview
This plan expands the previous onboarding optimization with a complete tiered pricing strategy (Free, Pro, Business) and feature gating system. It aligns with the "Business in a Box" model for the Business tier, professional tools for Pro, and limited access for Free users.

## Current State Analysis

### Existing Pricing Structure (from stripe.ts)
- **Free**: 10 calculations/month, basic tools, email support
- **Professional**: $29/month, unlimited calculations, advanced tools, PDF export, API access
- **Enterprise**: $99/month, team features, white-label, custom integrations

### Business in a Box Model (from skills documentation)
- Monthly subscription to Community (~$199/month via Skool)
- Includes: Community access, HVAC-R Pro App (white-labeled), Automation Engine
- Target: HVAC business owners serving clients
- App role: `Owner`

### Current Feature Landscape (from Dashboard & Tools)
1. **Calculation Tools**: Standard cycle, refrigerant comparison, cascade analysis
2. **Reporting**: PDF exports, advanced reporting
3. **Project Management**: My Projects, saved history
4. **Business Tools**: Revenue analytics, lead pipeline, risk shield
5. **Compliance & Thermal Calculations**: (Need investigation)
6. **Team Features**: Multi-company, user roles, invite system
7. **Automation**: Review Hunter, Invoice Chaser (planned)

## Feature Inventory & Classification

### Free Tier (Entry-level access)
**Target**: Students, hobbyists, occasional users
**Limits**: 10 calculations/month, basic features only
**Features**:
- Standard cycle analysis (basic parameters)
- Basic refrigerant comparison (2 refrigerants max)
- Compliance reference (read-only)
- Dashboard with usage tracking
- Email support
- 1 saved project

**Marketing Strategy**: Gray out advanced features with "Upgrade to Pro" tooltips, show usage progress bars, highlight Pro benefits

### Pro Tier (Individual Professional)
**Target**: HVAC technicians, engineers, freelancers
**Price**: $49/month or $490/year (adjusted from $29)
**Features** (all Free +):
- Unlimited calculations
- All analysis tools (cascade, advanced cycles)
- Advanced refrigerant comparison (unlimited)
- PDF export & advanced reporting
- API access for integrations
- 10 saved projects
- Priority email support
- Basic white-label (personal logo on reports)

**Value Proposition**: "Everything an individual professional needs"

### Business Tier (Business in a Box)
**Target**: HVAC business owners, agencies, teams
**Price**: $199/month (via Skool Community) or standalone $249/month
**Features** (all Pro +):
- Team collaboration (up to 5 users included)
- White-label branding (company logo, colors, domain)
- Client portal for customer access
- Automation engine (Review Hunter, Invoice Chaser)
- Advanced analytics & business dashboards
- Custom training sessions
- SLA guarantee
- Unlimited projects
- Dedicated support
- "Business in a Box" community access

**Value Proposition**: "Run your HVAC business with our complete toolkit"

## Updated Pricing Strategy

### Price Points
1. **Free**: $0 (permanent free tier)
2. **Pro**: $49/month or $490/year (save ~16%)
3. **Business**: $199/month (via Skool) or $249/month (direct)

### Usage Limits
- **Free**: 10 calculations/month, 1 project, 2 refrigerant comparisons
- **Pro**: Unlimited calculations, 10 projects, unlimited comparisons
- **Business**: Unlimited everything, 5 team members included (+$29/user/month)

### Competitive Positioning
- Pro tier priced between individual tools ($20-50) and full suites ($100+)
- Business tier aligns with "business in a box" community value
- Free tier creates funnel for conversion

## Feature Gating & UX Implementation

### Visual Design Patterns
1. **Grayed-out features**: Disabled buttons with tooltip "Upgrade to Pro"
2. **Usage meters**: Progress bars showing free tier usage
3. **Smart CTAs**: Contextual upgrade prompts when reaching limits
4. **Feature comparison tables**: Side-by-side tier comparison
5. **Value reminders**: "As a Pro user, you get X benefit" notifications

### Technical Implementation
1. **Enhanced SubscriptionGuard**: Support `requiredTier` prop (free|pro|business)
2. **Feature flag system**: Centralized feature availability by tier
3. **Usage tracking**: Real-time calculation counting
4. **Upgrade flows**: Seamless transition between tiers

## Integration with Onboarding Journey

### Free User Flow
1. Sign up → Auto-company creation → Dashboard
2. See "Welcome to Free Plan" modal with limits explained
3. Dashboard shows usage meter and upgrade CTAs
4. Advanced tools grayed out with upgrade prompts
5. After 5 calculations: "Upgrade for unlimited" notification

### Pro User Flow
1. Sign up → Choose plan (Free/Pro) → Payment → Dashboard
2. See "Pro features unlocked" onboarding tour
3. All tools available, focus on productivity
4. Regular value reminders (PDF exports saved X hours)

### Business User Flow
1. Sign up via Skool invite or direct purchase → Team setup → Dashboard
2. "Business in a Box" onboarding: branding, automations, team invites
3. Client portal setup wizard
4. Regular community engagement prompts

## Implementation Phases

### Phase 1: Foundation & Analysis (Week 1)
1. Complete feature inventory across all tools and pages
2. Map each feature to appropriate tier (Free/Pro/Business)
3. Design grayed-out UI components and upgrade modals
4. Update database schema for tier-based permissions

### Phase 2: Core Gating System (Week 2)
1. Implement enhanced `SubscriptionGuard` with tier support
2. Create `useFeatureAccess` hook for component-level gating
3. Build usage tracking service with monthly resets
4. Update Pricing page with new tiers and pricing

### Phase 3: Onboarding Integration (Week 3)
1. Modify sign-up flow to show tier selection
2. Implement post-sign-up plan selection modal
3. Create tier-specific onboarding tours
4. Add usage meters to dashboard and tools

### Phase 4: Business Tier Features (Week 4)
1. Implement white-label branding system
2. Build client portal framework
3. Integrate automation engine (Review Hunter, Invoice Chaser)
4. Create team management interface

### Phase 5: Optimization & Marketing (Week 5)
1. A/B test pricing points and conversion flows
2. Implement smart upgrade prompts based on usage patterns
3. Add referral program for Pro/Business tiers
4. Create automated email sequences for trial ending

## Database & Backend Changes

### Schema Updates
1. **users table**: Add `plan_tier` (free|pro|business), `plan_ends_at`
2. **subscriptions table**: Link to Stripe/Skool, track tier changes
3. **usage_metrics table**: Monthly calculation counts, feature usage
4. **white_label_settings table**: Business tier branding

### Backend Services
1. **Usage tracking RPC**: Increment counters, check limits
2. **Tier validation functions**: Check access to specific features
3. **Webhook handlers**: Process Stripe/Skool subscription events
4. **Automation triggers**: Business tier automation workflows

## Frontend Changes

### New Components
1. `TierBadge`: Shows current plan with upgrade option
2. `FeatureLock`: Grayed-out overlay with upgrade CTA
3. `UsageMeter`: Visual progress bar for free tier
4. `PlanComparison`: Side-by-tier feature table
5. `UpgradeModal`: Contextual upgrade prompts

### Hook Updates
1. `usePlanTier()`: Current tier and features
2. `useFeatureAccess(featureId)`: Boolean access check
3. `useUsageMetrics()`: Real-time usage data
4. `useUpgradeFlow()`: Handles upgrade navigation

### Page Updates
1. **Pricing**: New tiers, pricing, feature comparison
2. **Dashboard**: Tier-specific widgets, usage meters
3. **Tools**: Grayed-out features for free users
4. **Settings**: Plan management, upgrade options

## Marketing & Upgrade Strategy

### Smart Marketing Placement
1. **Dashboard**: Usage meter, "Upgrade for unlimited" CTA
2. **Tool pages**: "Pro feature" badges on advanced tools
3. **Export flows**: "Upgrade to export PDF" on export button
4. **Project limits**: "Upgrade for more projects" when limit reached

### Conversion Optimization
1. **Free trial**: 14-day Pro trial for new sign-ups
2. **Annual discount**: 20% discount for annual Pro subscription
3. **Team discounts**: Volume pricing for Business tier
4. **Education discount**: 50% off for students/educators

### Retention Strategies
1. **Usage notifications**: "You've used 8/10 calculations" emails
2. **Feature education**: "Did you know Pro users can X?" tips
3. **Loyalty rewards**: Discounts for long-term subscribers
4. **Community building**: Business tier community engagement

## Risks & Mitigations

### Risk: Free tier cannibalizes conversions
**Mitigation**: Careful feature balancing, aggressive Pro upsells, usage limits

### Risk: Price increase reduces sign-ups
**Mitigation**: Gradual rollout, grandfather existing users, clear value communication

### Risk: Complex tier system confuses users
**Mitigation**: Clear visual differentiation, simple feature comparison, guided selection

### Risk: Business tier overlaps with Pro
**Mitigation**: Distinct value propositions (team vs individual), separate marketing

## Success Metrics
1. **Conversion rate**: Free → Pro (target: 5%), Free → Business (target: 2%)
2. **ARPU increase**: From current ~$29 to ~$75 (weighted average)
3. **Churn reduction**: Pro tier < 5% monthly, Business tier < 3%
4. **Feature adoption**: Pro users using 70%+ of available features

## Next Steps
1. Approve this expanded plan
2. Begin Phase 1: Feature inventory and classification
3. Create detailed design mockups for grayed-out features
4. Update database schema for tier support

This comprehensive approach transforms the user journey from simple authentication to a value-driven tiered experience that maximizes conversions while providing clear paths for every user type.