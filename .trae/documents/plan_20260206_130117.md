I will implement the complete solution across three phases to address the redirections, UI/UX, and backend enforcement.

### **Phase 1: Fix Access & Redirections (Immediate Fix)**
**Goal:** Ensure users land on the correct page based on their role (`/tech` vs `/dashboard`) and fix the "Already a member" loop.
1.  **Update `SelectCompany.tsx`**:
    *   Implement role-based redirection logic:
        *   `technician` / `tech` -> `/tech`
        *   `client` -> `/portal`
        *   `admin` / `manager` / `owner` -> `/dashboard`
2.  **Update `JoinCompany.tsx`**:
    *   Apply the same redirection logic upon successful join.

### **Phase 2: Seamless "Create vs Join" UI/UX**
**Goal:** Provide a beautiful, clear choice for new users.
3.  **Redesign `SelectCompany.tsx`**:
    *   Replace the "No Organizations" text with a dual-card layout:
        *   **"Join Team"**: Links to `/join-company`.
        *   **"Create Organization"**: Links to `/create-company`.
    *   If companies exist, show the list *plus* a smaller "Create New" option.
4.  **Create `client/pages/CreateCompany.tsx`**:
    *   Build a modern form for creating a new organization.
    *   Include a "Skool Verification" check before allowing submission.
5.  **Register Routes**: Add `/create-company` to `App.tsx`.

### **Phase 3: Backend Enforcement (Security & Business Logic)**
**Goal:** Enforce seat limits and Skool requirements at the database level.
6.  **Migration: Seat Limits**:
    *   Update `use_invite_code` RPC to call `check_seat_limit` and block entry if full.
7.  **Migration: Skool Gate**:
    *   Create a Trigger on `companies` table to block `INSERT` unless `verify_skool_subscription()` returns true (or user is admin).
8.  **Migration: Invite Type Logic**:
    *   Ensure `create_invite_code` respects the specific role constraints requested.

I will begin by executing Phase 1 immediately.