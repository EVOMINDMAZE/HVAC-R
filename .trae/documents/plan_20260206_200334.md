# Documentation Update Plan: Docker-Based Supabase Development

## Current State Analysis
- **Current Approach**: Hybrid - Local Supabase Docker for development (`localhost:54321`), Cloud Supabase for production (`rxqflxmzsqhqrzffcsej.supabase.co`)
- **Documentation Inconsistency**: Multiple files contradict current practice:
  - `AI_ONBOARDING.md` says "NO DOCKER" and "Cloud-Direct DB"
  - `SUPABASE_CLI_GUIDE.md` focuses on cloud connections but mentions local reset
  - `supabase_setup.md` says "We do not use local Docker"
  - `.env` uses `localhost:54321` (local Docker)
  - `config.toml` configured for local Docker

## Documentation Files to Update

### **1. AI_ONBOARDING.md** (Highest Priority)
- **Section 4: Operational Rules**: Replace "NO DOCKER" with clear Docker usage policy
- **Section 5: Development Setup**: Add `supabase start` step for local development
- **Section 2: Architecture Pillars**: Update "Database" row to clarify local Docker vs cloud
- **Key Changes**:
  - Change "NO DOCKER" to "Use Docker for local development only"
  - Change "Cloud-Direct DB" to "Local Docker for dev, Cloud for production"
  - Add Docker setup instructions

### **2. SUPABASE_CLI_GUIDE.md**
- **Restructure**: Create clear sections for Local Docker vs Cloud Operations
- **Add Docker Commands**: `supabase start`, `supabase stop`, `supabase status`
- **Clarify Workflow**: Local development â†’ Push to cloud
- **Update Connection Examples**: Show both local and cloud URLs

### **3. skills/03_development/supabase_setup.md**
- **Rewrite Introduction**: Acknowledge Docker usage for local development
- **Update Step 3**: Change from "We do not use local Docker" to Docker setup instructions
- **Add Local Development Section**: Before "Apply Database Changes"
- **Maintain Cloud Deployment**: Keep cloud-focused sections for production

### **4. skills/03_development/developer_guide.md**
- **Update Prerequisites**: Add Docker as requirement
- **Update Installation Steps**: Include `supabase start`
- **Clarify Environment Variables**: Explain when to use localhost vs cloud URLs

### **5. FIX_SUPABASE.md**
- **Add Note**: Clarify that RPC fixes apply to both local Docker and cloud databases
- **Update SQL Editor Links**: Keep cloud reference but note local alternative

### **6. skills/01_strategy/cloud_strategy.md**
- **Minor Update**: Add note about local Docker for development in Section 1
- **Clarify**: Production remains 100% serverless, local development uses Docker

### **7. README.md** (Optional)
- **Add Docker Requirement**: If not already mentioned
- **Quick Start**: Include `supabase start` if needed

## Key Principles for Updates

### **Local Development Workflow**
```
1. Start local Supabase: `supabase start`
2. Configure .env with localhost:54321
3. Run dev server: `npm run dev`
4. Make changes via migrations
5. Push to cloud: `supabase db push`
```

### **Production Deployment Workflow**
```
1. Apply migrations to cloud: `supabase db push`
2. Deploy edge functions: `supabase functions deploy`
3. Update environment variables in Supabase dashboard
```

### **Docker Usage Policy**
- **YES**: Local development and testing
- **NO**: Production deployment (cloud-only)
- **YES**: Database migrations development
- **NO**: Client application (PWA remains Docker-free)

## Implementation Strategy

1. **Phase 1**: Update core documentation (AI_ONBOARDING.md, SUPABASE_CLI_GUIDE.md)
2. **Phase 2**: Update development guides (supabase_setup.md, developer_guide.md)
3. **Phase 3**: Update supporting documentation (cloud_strategy.md, FIX_SUPABASE.md)
4. **Phase 4**: Verify consistency across all files

## Expected Outcome
- Clear, consistent documentation reflecting actual development practices
- Developers understand when to use Docker vs cloud services
- No contradictory "NO DOCKER" statements conflicting with actual usage
- Smooth onboarding for new developers